index.html
<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <title>Капитан Паника — IP-прыжки по планете</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
    }

    body {
      background: radial-gradient(circle at 20% 0%, #111 0, #000 45%, #000 100%);
      color: #fff;
      min-height: 100vh;
      display: flex;
      align-items: stretch;
      justify-content: center;
      position: relative;
      overflow-x: hidden;
    }

    /* Лёгкое «звёздное» поле на фоне */
    body::before {
      content: "";
      position: fixed;
      inset: -50px;
      pointer-events: none;
      background-image:
        radial-gradient(circle, rgba(255, 255, 255, 0.22) 0, transparent 50%),
        radial-gradient(circle, rgba(255, 255, 255, 0.12) 0, transparent 55%),
        radial-gradient(circle, rgba(255, 255, 255, 0.08) 0, transparent 60%);
      background-size: 600px 600px, 900px 900px, 1300px 1300px;
      background-position: 10% 0%, 80% 40%, 50% 100%;
      opacity: 0.13;
      mix-blend-mode: screen;
      z-index: -1;
    }

    .wrapper {
      width: 100%;
      max-width: 1150px;
      padding: 24px 20px 40px;
      display: flex;
      flex-direction: column;
      gap: 32px;
      border-radius: 32px;
      border: 1px solid rgba(255, 255, 255, 0.18);
      box-shadow:
        0 0 40px rgba(255, 255, 255, 0.16),
        0 0 140px rgba(255, 255, 255, 0.18);
      background: radial-gradient(circle at 0 0, rgba(255, 255, 255, 0.06), transparent 60%),
                  radial-gradient(circle at 100% 100%, rgba(255, 255, 255, 0.04), transparent 60%),
                  rgba(0, 0, 0, 0.92);
      backdrop-filter: blur(16px);
      margin: 20px;
    }

    header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 16px;
      padding-bottom: 10px;
      border-bottom: 1px solid rgba(255, 255, 255, 0.18);
    }

    .logo {
      font-size: 20px;
      font-weight: 800;
      text-transform: uppercase;
      letter-spacing: 0.16em;
      padding: 6px 14px;
      border-radius: 999px;
      border: 1px solid rgba(255, 255, 255, 0.22);
      box-shadow:
        0 0 18px rgba(255, 255, 255, 0.5),
        0 0 50px rgba(255, 255, 255, 0.18);
      background: radial-gradient(circle at 0 0, rgba(255, 255, 255, 0.16), transparent 55%);
    }

    .tagline {
      font-size: 12px;
      opacity: 0.8;
      text-align: right;
      line-height: 1.4;
      text-shadow: 0 0 14px rgba(255, 255, 255, 0.35);
    }

    main {
      display: grid;
      grid-template-columns: minmax(0, 1.1fr) minmax(0, 0.9fr);
      gap: 32px;
      align-items: flex-start;
    }

    /* Левая часть */
    .hero-text-title {
      font-size: 34px;
      line-height: 1.05;
      margin-bottom: 14px;
      text-shadow:
        0 0 22px rgba(255, 255, 255, 0.4),
        0 0 60px rgba(255, 255, 255, 0.25);
    }

    .hero-text-title span {
      display: block;
      font-size: 14px;
      text-transform: uppercase;
      letter-spacing: 0.24em;
      opacity: 0.65;
      margin-bottom: 8px;
    }

    .hero-text-subtitle {
      font-size: 15px;
      opacity: 0.85;
      max-width: 420px;
      margin-bottom: 20px;
    }

    .hero-mini {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-bottom: 22px;
    }

    .pill {
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 0.12em;
      padding: 6px 12px;
      border-radius: 999px;
      border: 1px solid rgba(255, 255, 255, 0.22);
      background: rgba(255, 255, 255, 0.03);
      box-shadow:
        0 0 16px rgba(255, 255, 255, 0.3),
        0 0 40px rgba(255, 255, 255, 0.18);
      opacity: 0.9;
    }

    .controls {
      display: flex;
      flex-wrap: wrap;
      gap: 12px;
      align-items: center;
      margin-bottom: 18px;
    }

    .btn-main {
      border-radius: 999px;
      padding: 10px 22px;
      font-size: 14px;
      border: none;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      transition: transform 0.12s ease, box-shadow 0.12s ease, opacity 0.12s ease, background 0.12s ease, color 0.12s ease;
      background: #fff;
      color: #000;
      font-weight: 600;
      box-shadow:
        0 0 24px rgba(255, 255, 255, 0.7),
        0 0 90px rgba(255, 255, 255, 0.45);
    }

    .btn-main:hover {
      transform: translateY(-1px);
      box-shadow:
        0 0 34px rgba(255, 255, 255, 0.9),
        0 0 120px rgba(255, 255, 255, 0.6);
    }

    .hint-text {
      font-size: 11px;
      opacity: 0.8;
    }

    /* Правая часть: ГЛОБУС */
    .space-panel {
      border-radius: 24px;
      border: 1px solid rgba(255, 255, 255, 0.28);
      padding: 20px 18px 18px;
      background: radial-gradient(circle at 0 0, rgba(255, 255, 255, 0.12), transparent 58%),
                  radial-gradient(circle at 100% 100%, rgba(255, 255, 255, 0.08), transparent 62%),
                  #020202;
      box-shadow:
        0 0 60px rgba(255, 255, 255, 0.4),
        0 0 130px rgba(255, 255, 255, 0.25);
      display: flex;
      flex-direction: column;
      gap: 16px;
      position: relative;
      overflow: hidden;
    }

    .space-panel::after {
      /* лёгкие мерцающие «цифровые шумы» */
      content: "";
      position: absolute;
      inset: -50%;
      background-image:
        linear-gradient(120deg, rgba(255, 255, 255, 0.12) 1px, transparent 1px),
        linear-gradient(60deg, rgba(255, 255, 255, 0.09) 1px, transparent 1px);
      background-size: 160px 160px;
      opacity: 0.08;
      mix-blend-mode: screen;
      pointer-events: none;
    }

    .space-header {
      display: flex;
      justify-content: space-between;
      font-size: 11px;
      opacity: 0.8;
      text-transform: uppercase;
      letter-spacing: 0.16em;
      position: relative;
      z-index: 1;
    }

    .space-main {
      display: grid;
      grid-template-columns: 1fr 1.1fr;
      gap: 18px;
      align-items: center;
      position: relative;
      z-index: 1;
    }

    .globe-wrap {
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .globe-orbit {
      width: 215px;
      height: 215px;
      border-radius: 50%;
      border: 1px solid rgba(255, 255, 255, 0.22);
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow:
        0 0 45px rgba(255, 255, 255, 0.25),
        0 0 120px rgba(255, 255, 255, 0.2);
      position: relative;
      overflow: visible;
    }

    .globe-orbit::before {
      content: "";
      position: absolute;
      inset: 18px;
      border-radius: 50%;
      border: 1px dashed rgba(255, 255, 255, 0.26);
      opacity: 0.75;
    }

    .globe-orbit::after {
      /* орбитальная линия по диагонали */
      content: "";
      position: absolute;
      width: 260px;
      height: 260px;
      border-radius: 50%;
      border: 1px solid rgba(255, 255, 255, 0.16);
      transform: rotate(22deg);
      opacity: 0.4;
    }

    .globe {
      width: 155px;
      height: 155px;
      border-radius: 50%;
      position: relative;
      overflow: hidden;
      border: 2px solid #fff;
      box-shadow:
        0 0 30px rgba(255, 255, 255, 0.7),
        0 0 90px rgba(255, 255, 255, 0.45);
      background: #000;
      animation: globeIdle 22s linear infinite;
    }

    .globe-layer {
      position: absolute;
      inset: 0;
      border-radius: 50%;
      pointer-events: none;
    }

    /* ОКЕАН — белый круг */
    .globe-ocean {
      background: #fff;
    }

    /* МАТЕРИКИ — чёрные «пятна», похожие на референс */
    .globe-continents {
      background:
        radial-gradient(circle at 22% 32%, #000 0, #000 30%, transparent 42%),
        radial-gradient(circle at 68% 40%, #000 0, #000 26%, transparent 40%),
        radial-gradient(circle at 40% 78%, #000 0, #000 26%, transparent 40%);
      mix-blend-mode: normal;
      box-shadow:
        0 0 16px rgba(0, 0, 0, 0.85),
        0 0 32px rgba(0, 0, 0, 0.8);
    }

    /* СЕТКА ИНТЕРНЕТА — полупрозрачная серая сетка + узлы */
    .globe-network {
      background-image:
        /* линии долготы и широты */
        repeating-radial-gradient(circle at 50% 50%,
          rgba(80, 80, 80, 0.55) 0px,
          rgba(80, 80, 80, 0.55) 1px,
          transparent 2px,
          transparent 14px),
        repeating-conic-gradient(from 0deg,
          rgba(80, 80, 80, 0.4) 0deg 1deg,
          transparent 1deg 9deg);
      mix-blend-mode: soft-light;
      opacity: 0.65;
      filter: blur(0.3px);
    }

    /* Узлы-светлячки на сетке */
    .globe-network::before {
      content: "";
      position: absolute;
      inset: 12%;
      border-radius: 50%;
      background-image:
        radial-gradient(circle at 20% 30%, rgba(200, 200, 200, 0.9) 0, transparent 40%),
        radial-gradient(circle at 65% 45%, rgba(200, 200, 200, 0.8) 0, transparent 40%),
        radial-gradient(circle at 35% 70%, rgba(200, 200, 200, 0.78) 0, transparent 45%);
      mix-blend-mode: screen;
      opacity: 0.9;
    }

    .globe-glow {
      background:
        radial-gradient(circle at 30% 0%, rgba(255, 255, 255, 0.8) 0, transparent 60%),
        radial-gradient(circle at 80% 100%, rgba(255, 255, 255, 0.45) 0, transparent 70%);
      mix-blend-mode: screen;
      opacity: 0.8;
      animation: globeGlow 4.5s ease-in-out infinite alternate;
    }

    .globe-label {
      position: absolute;
      bottom: 10px;
      left: 50%;
      transform: translateX(-50%);
      font-size: 11px;
      letter-spacing: 0.12em;
      text-transform: uppercase;
      background: rgba(0, 0, 0, 0.78);
      padding: 3px 8px;
      border-radius: 999px;
      border: 1px solid rgba(255, 255, 255, 0.7);
      box-shadow:
        0 0 10px rgba(255, 255, 255, 0.7),
        0 0 24px rgba(255, 255, 255, 0.45);
      z-index: 3;
    }

    /* ФЛАЖОК */
    .globe-flag {
      position: absolute;
      width: 10px;
      height: 18px;
      transform: translate(-50%, -100%);
      transition: left 0.5s ease, top 0.5s ease;
      z-index: 4;
    }

    .globe-flag-stick {
      position: absolute;
      width: 2px;
      height: 18px;
      background: #fff;
      left: 4px;
      bottom: 0;
      box-shadow: 0 0 4px rgba(255, 255, 255, 0.9);
    }

    .globe-flag-cloth {
      position: absolute;
      left: 4px;
      bottom: 10px;
      width: 10px;
      height: 7px;
      background: #fff;
      border-radius: 2px;
      box-shadow:
        0 0 6px rgba(255, 255, 255, 1),
        0 0 14px rgba(255, 255, 255, 0.9);
    }

    .globe-spin {
      animation: globeJump 0.6s ease-out;
    }

    @keyframes globeIdle {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    @keyframes globeJump {
      0% { transform: rotate(0deg) scale(1); }
      40% { transform: rotate(210deg) scale(1.08); }
      80% { transform: rotate(380deg) scale(0.97); }
      100% { transform: rotate(420deg) scale(1); }
    }

    @keyframes globeGlow {
      0% { opacity: 0.7; }
      100% { opacity: 1; }
    }

    .space-info {
      display: flex;
      flex-direction: column;
      gap: 6px;
    }

    .label {
      font-size: 11px;
      opacity: 0.7;
      text-transform: uppercase;
      letter-spacing: 0.16em;
    }

    .ip-value {
      font-size: 18px;
      font-weight: 600;
      letter-spacing: 0.12em;
      padding: 6px 10px;
      border-radius: 10px;
      border: 1px solid rgba(255, 255, 255, 0.3);
      background: rgba(255, 255, 255, 0.03);
      box-shadow:
        0 0 24px rgba(255, 255, 255, 0.35),
        0 0 60px rgba(255, 255, 255, 0.2);
    }

    .place-name {
      font-size: 15px;
      font-weight: 500;
    }

    .coords {
      font-size: 11px;
      opacity: 0.75;
    }

    .status {
      font-size: 11px;
      opacity: 0.75;
      margin-top: 6px;
    }

    .status span {
      font-weight: 600;
      opacity: 0.95;
    }

    /* Блок результата */
    .result-section {
      border-radius: 20px;
      border: 1px solid rgba(255, 255, 255, 0.22);
      padding: 18px 16px 16px;
      display: grid;
      grid-template-columns: minmax(0, 1.3fr) minmax(0, 1fr);
      gap: 16px;
      background: radial-gradient(circle at 20% 0, rgba(255, 255, 255, 0.12), transparent 55%),
                  #000;
      box-shadow:
        0 0 40px rgba(255, 255, 255, 0.28),
        0 0 90px rgba(255, 255, 255, 0.2);
    }

    .result-text h2 {
      font-size: 18px;
      margin-bottom: 6px;
      text-shadow: 0 0 12px rgba(255, 255, 255, 0.45);
    }

    .result-text p {
      font-size: 13px;
      opacity: 0.82;
      margin-bottom: 8px;
    }

    .facts-title {
      font-size: 12px;
      text-transform: uppercase;
      letter-spacing: 0.16em;
      opacity: 0.8;
      margin-top: 10px;
      margin-bottom: 4px;
    }

    .facts-list {
      list-style: none;
      font-size: 13px;
      opacity: 0.9;
      display: grid;
      gap: 4px;
    }

    .facts-list li::before {
      content: "• ";
      opacity: 0.55;
    }

    .result-media {
      border-radius: 22px;
      overflow: hidden;
      border: 1px solid rgba(255, 255, 255, 0.22);
      box-shadow:
        0 0 36px rgba(255, 255, 255, 0.55),
        0 0 110px rgba(255, 255, 255, 0.25);
      background: #000;
      min-height: 210px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .result-media img {
      width: 100%;
      height: 100%;
      max-height: 340px;
      object-fit: cover;
      border-radius: 22px;
    }

    .result-placeholder {
      font-size: 12px;
      opacity: 0.7;
      padding: 14px;
      text-align: center;
    }

    /* Журнал прыжков */
    .history-section {
      border-radius: 16px;
      border: 1px solid rgba(255, 255, 255, 0.2);
      padding: 14px 14px 12px;
      background: radial-gradient(circle at 0 100%, rgba(255, 255, 255, 0.14), transparent 50%),
                  #000;
      box-shadow:
        0 0 32px rgba(255, 255, 255, 0.2),
        0 0 70px rgba(255, 255, 255, 0.12);
    }

    .history-header {
      font-size: 12px;
      text-transform: uppercase;
      letter-spacing: 0.18em;
      opacity: 0.8;
      margin-bottom: 6px;
    }

    .history-list {
      list-style: none;
      font-size: 12px;
      display: grid;
      gap: 4px;
    }

    .history-item {
      display: flex;
      justify-content: space-between;
      gap: 8px;
      opacity: 0.9;
    }

    .history-item span:first-child {
      font-family: ui-monospace, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      letter-spacing: 0.08em;
    }

    .history-empty {
      opacity: 0.7;
    }

    footer {
      font-size: 11px;
      opacity: 0.7;
      border-top: 1px solid rgba(255, 255, 255, 0.18);
      padding-top: 10px;
      text-align: right;
    }

    @media (max-width: 860px) {
      main {
        grid-template-columns: 1fr;
      }

      .hero-text-subtitle {
        max-width: none;
      }

      .space-main {
        grid-template-columns: 1fr;
      }

      .result-section {
        grid-template-columns: 1fr;
      }

      header {
        flex-direction: column;
        align-items: flex-start;
      }

      .tagline {
        text-align: left;
      }
    }

    @media (max-width: 520px) {
      .hero-text-title {
        font-size: 26px;
      }

      .globe-orbit {
        width: 185px;
        height: 185px;
      }

      .globe {
        width: 135px;
        height: 135px;
      }
    }
  </style>
</head>
<body>
  <div class="wrapper">
    <header>
      <div class="logo">Капитан&nbsp;Паника</div>
      <div class="tagline">
        Чёрно-белый глобус, серая интернет-сетка и IP-прыжки по реальным городам.<br />
        Один клик — и флажок воткнётся в новую точку планеты.
      </div>
    </header>

    <main>
      <section>
        <div class="hero-text-title">
          <span>ip-космонавтика</span>
          Прыжок в случайную точку сети.
        </div>
        <p class="hero-text-subtitle">
          Нажми на кнопку — и «Капитан Паника» выберет IP, покажет город, воткнёт флажок в глобус и выведет факты с цветной картинкой.
        </p>

        <div class="hero-mini">
          <div class="pill">Глобус с сеткой</div>
          <div class="pill">Чёрный + белый + свет</div>
          <div class="pill">Смелый космический UI</div>
        </div>

        <div class="controls">
          <button class="btn-main" id="generateBtn">Получить случайный IP</button>
          <span class="hint-text">Каждый прыжок — новый адрес, новое место и новый набор забавных фактов.</span>
        </div>
      </section>

      <section class="space-panel">
        <div class="space-header">
          <div>Панель навигации</div>
          <div>Состояние: <span id="statusShort">ожидание</span></div>
        </div>

        <div class="space-main">
          <div class="globe-wrap">
            <div class="globe-orbit">
              <div class="globe" id="globe">
                <div class="globe-layer globe-ocean"></div>
                <div class="globe-layer globe-continents"></div>
                <div class="globe-layer globe-network"></div>
                <div class="globe-layer globe-glow"></div>
                <div class="globe-label" id="globeLabel">PANIC • 01</div>
                <div class="globe-flag" id="globeFlag" style="left:50%; top:50%; display:none;">
                  <div class="globe-flag-stick"></div>
                  <div class="globe-flag-cloth"></div>
                </div>
              </div>
            </div>
          </div>

          <div class="space-info">
            <div class="label">Текущий IP-адрес</div>
            <div class="ip-value" id="ipValue">0.0.0.0</div>

            <div class="label" style="margin-top:10px;">Местоположение</div>
            <div class="place-name" id="placeName">Адрес ещё не выбран</div>
            <div class="coords" id="placeCoords">Нажми «Получить случайный IP».</div>

            <div class="status">
              Статус прыжка: <span id="statusText">ожидание запуска</span>
            </div>
          </div>
        </div>
      </section>
    </main>

    <section class="result-section" id="resultSection">
      <div class="result-text">
        <h2 id="resultTitle">Точка назначения не выбрана</h2>
        <p id="resultDescription">
          Здесь появится сводка по месту: город, страна, чем оно живёт и за что его любят местные и туристы.
        </p>
        <div class="facts-title">Интересные факты</div>
        <ul class="facts-list" id="placeFacts">
          <li>Численность населения: система ещё не выбрала точку — планета вращается в режиме ожидания.</li>
          <li>Самое важное событие: первый клип по кнопке «Получить случайный IP» всё изменит.</li>
          <li>Причина известности: этот раздел ждёт свой первый город.</li>
          <li>Смешной факт: ты уже находишься на сайте про путешествия по IP, а это само по себе немного безумно.</li>
        </ul>
      </div>

      <div class="result-media" id="mediaBox">
        <div class="result-placeholder" id="mediaPlaceholder">
          Цветное фото точки назначения появится здесь после выбора IP-адреса.
        </div>
        <img id="placeImage" src="" alt="" style="display:none;" />
      </div>
    </section>

    <section class="history-section">
      <div class="history-header">Журнал прыжков</div>
      <ul class="history-list" id="historyList">
        <li class="history-empty">Пока нет прыжков. Нажми кнопку, чтобы глобус впервые поймал флажок.</li>
      </ul>
    </section>

    <footer>
      © 2025 «Капитан Паника». Учебный проект. IP-адреса и данные по городам используются в демонстрационных целях.
    </footer>
  </div>

  <script>
    /* Много IP-адресов с городами и позициями флага (в процентах по глобусу) */
    const locations = [
      {
        ip: "8.8.8.8",
        name: "Маунтин-Вью, США",
        coords: "37.3861° N, 122.0839° W",
        description: "Тихий калифорнийский город, который неожиданно оказался в центре мировой IT-индустрии.",
        image: "https://images.pexels.com/photos/3738992/pexels-photo-3738992.jpeg?auto=compress&cs=tinysrgb&w=1200",
        flagX: 24,
        flagY: 52,
        facts: [
          "Численность населения: около 80 000 человек — компактное сердце больших технологий.",
          "Самое важное событие: превращение спокойного пригородного города в символ Кремниевой долины.",
          "Причина известности: здесь сосредоточены штаб-квартиры сервисов, без которых сложно представить интернет.",
          "Смешной факт: обсуждать будущее планеты в очереди за кофе здесь абсолютно нормально."
        ]
      },
      {
        ip: "1.1.1.1",
        name: "Сидней, Австралия",
        coords: "33.8688° S, 151.2093° E",
        description: "Прибрежный мегаполис с оперным театром, мостом и пляжами, которые ты точно видел на открытках.",
        image: "https://images.pexels.com/photos/2193300/pexels-photo-2193300.jpeg?auto=compress&cs=tinysrgb&w=1200",
        flagX: 82,
        flagY: 80,
        facts: [
          "Численность населения: более 5 миллионов человек в агломерации.",
          "Самое важное событие: Олимпийские игры 2000 года — город показал себя всему миру.",
          "Причина известности: культовые виды залива, опера и расслабленный прибрежный ритм жизни.",
          "Смешной факт: людей в деловых костюмах и шлёпках здесь можно встретить чаще, чем кажется логичным."
        ]
      },
      {
        ip: "13.248.118.1",
        name: "Токио, Япония",
        coords: "35.6762° N, 139.6503° E",
        description: "Мегаполис, где синтоистские храмы и неоновые вывески живут на соседних улицах.",
        image: "https://images.pexels.com/photos/3092770/pexels-photo-3092770.jpeg?auto=compress&cs=tinysrgb&w=1200",
        flagX: 82,
        flagY: 45,
        facts: [
          "Численность населения: свыше 37 миллионов человек в агломерации.",
          "Самое важное событие: послевоенное восстановление и превращение в один из главных городов планеты.",
          "Причина известности: сочетание киберпанк-эстетики, технологий и строгой вежливости.",
          "Смешной факт: автоматы с напитками появляются с такой частотой, что некоторые туристы начинают их считать."
        ]
      },
      {
        ip: "104.26.10.8",
        name: "Рейкьявик, Исландия",
        coords: "64.1466° N, 21.9426° W",
        description: "Столица на краю света, окружённая вулканами, океаном и паром от горячих источников.",
        image: "https://images.pexels.com/photos/3735162/pexels-photo-3735162.jpeg?auto=compress&cs=tinysrgb&w=1200",
        flagX: 40,
        flagY: 25,
        facts: [
          "Численность населения: чуть более 130 000 человек.",
          "Самое важное событие: переход на масштабную геотермальную энергетику — город греется силой недр.",
          "Причина известности: северное сияние, гейзеры и пейзажи, похожие на другую планету.",
          "Смешной факт: деревьев здесь мало, поэтому шутка «потерялся в лесу» звучит особенно забавно."
        ]
      },
      {
        ip: "172.217.20.46",
        name: "Сан-Франциско, США",
        coords: "37.7749° N, 122.4194° W",
        description: "Город туманов, холмов, старых трамваев и легендарного моста через залив.",
        image: "https://images.pexels.com/photos/208745/pexels-photo-208745.jpeg?auto=compress&cs=tinysrgb&w=1200",
        flagX: 15,
        flagY: 52,
        facts: [
          "Численность населения: около 800 000 человек в городе и миллионы в агломерации.",
          "Самое важное событие: золотая лихорадка, после которой город резко вырос и уже не остановился.",
          "Причина известности: мост «Золотые ворота», крутые улицы и близость к Кремниевой долине.",
          "Смешной факт: иногда туристы приезжают «посмотреть мост», а видят только туман — и всё равно счастливы."
        ]
      },
      {
        ip: "81.2.69.142",
        name: "Лондон, Великобритания",
        coords: "51.5074° N, 0.1278° W",
        description: "Туманный мегаполис, где история, банковские кварталы и панки умудряются уживаться в одном городе.",
        image: "https://images.pexels.com/photos/460672/pexels-photo-460672.jpeg?auto=compress&cs=tinysrgb&w=1200",
        flagX: 50,
        flagY: 40,
        facts: [
          "Численность населения: более 9 миллионов человек.",
          "Самое важное событие: вековой статус политического и финансового центра.",
          "Причина известности: Биг-Бен, Темза, двухэтажные автобусы и бесконечные музеи.",
          "Смешной факт: здесь можно пережить все четыре времени года за один день — погода любит эксперименты."
        ]
      },
      {
        ip: "45.33.32.156",
        name: "Сеул, Южная Корея",
        coords: "37.5665° N, 126.9780° E",
        description: "Город-неон: дворцы эпохи Чосон и современные небоскрёбы освещены одинаково ярко.",
        image: "https://images.pexels.com/photos/237211/pexels-photo-237211.jpeg?auto=compress&cs=tinysrgb&w=1200",
        flagX: 85,
        flagY: 50,
        facts: [
          "Численность населения: около 10 миллионов человек в городе и более 25 миллионов в агломерации.",
          "Самое важное событие: стремительная индустриализация и превращение в цифровую столицу региона.",
          "Причина известности: к-поп, дорамы, уличная еда и районы, которые не спят до утра.",
          "Смешной факт: некоторые кафе открыты так долго, что сложно понять, где тут утро, а где вечер."
        ]
      },
      {
        ip: "91.198.174.192",
        name: "Амстердам, Нидерланды",
        coords: "52.3676° N, 4.9041° E",
        description: "Город каналов, мостов и велосипедов, где вода почти так же важна, как дороги.",
        image: "https://images.pexels.com/photos/161249/canal-amsterdam-netherlands-bridge-161249.jpeg?auto=compress&cs=tinysrgb&w=1200",
        flagX: 55,
        flagY: 38,
        facts: [
          "Численность населения: около 900 000 человек в городе и более 2,5 миллионов в регионе.",
          "Самое важное событие: «золотой век» торговли, когда город стал одним из ключевых портов Европы.",
          "Причина известности: уютные каналы, тюльпаны и свободолюбивый характер.",
          "Смешной факт: велосипедов здесь официально больше, чем людей — это многое объясняет."
        ]
      },
      {
        ip: "151.101.1.69",
        name: "Нью-Йорк, США",
        coords: "40.7128° N, 74.0060° W",
        description: "Город, который одновременно живёт в реальности и в сотне фильмов и сериалов.",
        image: "https://images.pexels.com/photos/3787839/pexels-photo-3787839.jpeg?auto=compress&cs=tinysrgb&w=1200",
        flagX: 22,
        flagY: 48,
        facts: [
          "Численность населения: более 8,5 миллионов человек в городе и свыше 19 миллионов в агломерации.",
          "Самое важное событие: превращение из порта иммигрантов в финансовую и медиа-столицу мира.",
          "Причина известности: Таймс-сквер, Бродвей, Центральный парк и ощущение фильма даже в обычном дворе.",
          "Смешной факт: многие впервые приезжают сюда с ощущением, что уже всё знают — а город всё равно удивляет."
        ]
      },
      {
        ip: "23.211.138.80",
        name: "Париж, Франция",
        coords: "48.8566° N, 2.3522° E",
        description: "Город, где даже обычное утро с круассаном кажется немного кинематографичным.",
        image: "https://images.pexels.com/photos/338515/pexels-photo-338515.jpeg?auto=compress&cs=tinysrgb&w=1200",
        flagX: 54,
        flagY: 42,
        facts: [
          "Численность населения: около 2,1 миллиона человек в городе и свыше 10 миллионов в агломерации.",
          "Самое важное событие: превращение в культурную и художественную столицу Европы.",
          "Причина известности: Эйфелева башня, Лувр, мода и бесконечные фильмы про любовь.",
          "Смешной факт: местные могут часами сидеть с чашкой кофе — и это считается продуктивным временем."
        ]
      },
      {
        ip: "210.140.92.0",
        name: "Токио (Сибуя), Япония",
        coords: "35.6595° N, 139.7005° E",
        description: "Район с одной из самых загруженных пешеходных переправ в мире.",
        image: "https://images.pexels.com/photos/240040/pexels-photo-240040.jpeg?auto=compress&cs=tinysrgb&w=1200",
        flagX: 83,
        flagY: 46,
        facts: [
          "Численность населения района: сотни тысяч жителей и нескончаемый поток людей.",
          "Самое важное событие: превращение обычного перекрёстка в символ городского движения.",
          "Причина известности: неоновые экраны, реклама и плотный человеческий поток в такт светофору.",
          "Смешной факт: многие туристы переходят этот перекрёсток несколько раз подряд только ради ощущения «как в аниме»."
        ]
      },
      {
        ip: "203.0.113.42",
        name: "Берлин, Германия",
        coords: "52.5200° N, 13.4050° E",
        description: "Столица с сильным характером, уличным искусством и клубной сценой мирового уровня.",
        image: "https://images.pexels.com/photos/462867/pexels-photo-462867.jpeg?auto=compress&cs=tinysrgb&w=1200",
        flagX: 56,
        flagY: 37,
        facts: [
          "Численность населения: около 3,8 миллиона человек.",
          "Самое важное событие: падение Берлинской стены и воссоединение города.",
          "Причина известности: альтернативная культура, граффити и техно-клубы.",
          "Смешной факт: здесь есть клубы, где очередь на вход — это почти отдельное социальное событие."
        ]
      },
      {
        ip: "198.51.100.23",
        name: "Москва, Россия",
        coords: "55.7558° N, 37.6173° E",
        description: "Мегаполис, где древние стены Кремля соседствуют с стеклянными бизнес-центрами.",
        image: "https://images.pexels.com/photos/4606728/pexels-photo-4606728.jpeg?auto=compress&cs=tinysrgb&w=1200",
        flagX: 63,
        flagY: 32,
        facts: [
          "Численность населения: более 12 миллионов человек.",
          "Самое важное событие: многовековой статус столицы огромной страны.",
          "Причина известности: Красная площадь, метро, пробки и скорость жизни.",
          "Смешной факт: некоторые станции метро выглядят как дворцы, и по ним реально водят экскурсии."
        ]
      },
      {
        ip: "192.0.2.77",
        name: "Стамбул, Турция",
        coords: "41.0082° N, 28.9784° E",
        description: "Город на стыке Европы и Азии, где запах специй смешивается с морским воздухом.",
        image: "https://images.pexels.com/photos/210657/pexels-photo-210657.jpeg?auto=compress&cs=tinysrgb&w=1200",
        flagX: 62,
        flagY: 45,
        facts: [
          "Численность населения: более 15 миллионов человек.",
          "Самое важное событие: роль столицы великих империй и перекрёстка торговых путей.",
          "Причина известности: Босфор, мечети, рынки и чай в тонких стаканчиках.",
          "Смешной факт: иногда здесь одновременно слышно крики чаек, гудки кораблей и зов на молитву — и всё это один саундтрек."
        ]
      },
      {
        ip: "203.0.113.99",
        name: "Буэнос-Айрес, Аргентина",
        coords: "34.6037° S, 58.3816° W",
        description: "Южноамериканский город с европейским настроением и танго прямо на улицах.",
        image: "https://images.pexels.com/photos/2400400/pexels-photo-2400400.jpeg?auto=compress&cs=tinysrgb&w=1200",
        flagX: 34,
        flagY: 78,
        facts: [
          "Численность населения: около 3 миллионов человек в городе и более 13 миллионов в агломерации.",
          "Самое важное событие: становление как крупного порта и культурного центра региона.",
          "Причина известности: танго, футбол и вечерние прогулки по широким проспектам.",
          "Смешной факт: фанаты футбола здесь переживают матчи так, словно от счёта зависит погода."
        ]
      },
      {
        ip: "198.51.100.144",
        name: "Каир, Египет",
        coords: "30.0444° N, 31.2357° E",
        description: "Город рядом с пирамидами, которые спокойно пережили все исторические перипетии.",
        image: "https://images.pexels.com/photos/2400401/pexels-photo-2400401.jpeg?auto=compress&cs=tinysrgb&w=1200",
        flagX: 60,
        flagY: 55,
        facts: [
          "Численность населения: более 9 миллионов человек в городе и сильно больше в агломерации.",
          "Самое важное событие: многотысячелетняя цивилизация, развивавшаяся вдоль Нила.",
          "Причина известности: пирамиды, Сфинкс и бесконечные археологические истории.",
          "Смешной факт: для местных пирамиды — почти привычный фон, как кому-то — остановка метро."
        ]
      },
      {
        ip: "192.0.2.155",
        name: "Рио-де-Жанейро, Бразилия",
        coords: "22.9068° S, 43.1729° W",
        description: "Город между океаном и горами, где карнавал — не просто праздник, а часть идентичности.",
        image: "https://images.pexels.com/photos/1761279/pexels-photo-1761279.jpeg?auto=compress&cs=tinysrgb&w=1200",
        flagX: 30,
        flagY: 75,
        facts: [
          "Численность населения: около 6,7 миллиона человек.",
          "Самое важное событие: легендарные карнавалы, покорившие мир.",
          "Причина известности: статуя Христа-Искупителя, пляжи и музыка.",
          "Смешной факт: увидеть человека с серфом в общественном транспорте — абсолютно нормальная ситуация."
        ]
      },
      {
        ip: "203.0.113.200",
        name: "Сингапур",
        coords: "1.3521° N, 103.8198° E",
        description: "Компактный город-государство, где технологии и порядок встречаются на каждом шагу.",
        image: "https://images.pexels.com/photos/2187605/pexels-photo-2187605.jpeg?auto=compress&cs=tinysrgb&w=1200",
        flagX: 88,
        flagY: 63,
        facts: [
          "Численность населения: около 5,7 миллиона человек.",
          "Самое важное событие: стремительное превращение порта в глобальный финансовый центр.",
          "Причина известности: футуристические сады, небоскрёбы и очень строгие правила.",
          "Смешной факт: жвачку здесь не очень любят, зато метро и улицы выглядят как после уборки фотостудии."
        ]
      },
      {
        ip: "198.51.100.222",
        name: "Кейптаун, ЮАР",
        coords: "33.9249° S, 18.4241° E",
        description: "Город у подножия Столовой горы с сумасшедшими по красоте видами на океан.",
        image: "https://images.pexels.com/photos/4606729/pexels-photo-4606729.jpeg?auto=compress&cs=tinysrgb&w=1200",
        flagX: 52,
        flagY: 82,
        facts: [
          "Численность населения: около 4,6 миллиона человек в агломерации.",
          "Самое важное событие: развитие города как важного порта и культурного центра региона.",
          "Причина известности: гора, океан и маршруты, где можно увидеть сразу все оттенки синего.",
          "Смешной факт: местная погода может устроить за день мини-сериал из нескольких сезонов."
        ]
      }
    ];

    const globeEl = document.getElementById("globe");
    const globeLabelEl = document.getElementById("globeLabel");
    const globeFlagEl = document.getElementById("globeFlag");

    const ipValueEl = document.getElementById("ipValue");
    const placeNameEl = document.getElementById("placeName");
    const placeCoordsEl = document.getElementById("placeCoords");
    const statusTextEl = document.getElementById("statusText");
    const statusShortEl = document.getElementById("statusShort");

    const resultTitleEl = document.getElementById("resultTitle");
    const resultDescriptionEl = document.getElementById("resultDescription");
    const placeFactsEl = document.getElementById("placeFacts");
    const placeImageEl = document.getElementById("placeImage");
    const mediaPlaceholderEl = document.getElementById("mediaPlaceholder");
    const resultSectionEl = document.getElementById("resultSection");
    const historyListEl = document.getElementById("historyList");

    const generateBtn = document.getElementById("generateBtn");

    const jumpHistory = [];

    function renderHistory() {
      historyListEl.innerHTML = "";
      if (jumpHistory.length === 0) {
        const li = document.createElement("li");
        li.className = "history-empty";
        li.textContent = "Пока нет прыжков. Нажми кнопку, чтобы глобус впервые поймал флажок.";
        historyListEl.appendChild(li);
        return;
      }
      jumpHistory.forEach((entry) => {
        const li = document.createElement("li");
        li.className = "history-item";
        const ipSpan = document.createElement("span");
        ipSpan.textContent = entry.ip;
        const nameSpan = document.createElement("span");
        nameSpan.textContent = entry.name;
        li.appendChild(ipSpan);
        li.appendChild(nameSpan);
        historyListEl.appendChild(li);
      });
    }

    function spinGlobe() {
      globeEl.classList.remove("globe-spin");
      void globeEl.offsetWidth; // сброс анимации
      globeEl.classList.add("globe-spin");
    }

    function placeFlag(xPercent, yPercent) {
      globeFlagEl.style.display = "block";
      globeFlagEl.style.left = xPercent + "%";
      globeFlagEl.style.top = yPercent + "%";
    }

    function applyLocation(location) {
      spinGlobe();

      ipValueEl.textContent = location.ip;
      placeNameEl.textContent = location.name;
      placeCoordsEl.textContent = location.coords;
      globeLabelEl.textContent = "PANIC • IP";

      statusShortEl.textContent = "онлайн";
      statusTextEl.textContent = "прыжок выполнен, флажок воткнулся в планету";

      resultTitleEl.textContent = `Точка назначения: ${location.name}`;
      resultDescriptionEl.textContent = location.description;

      placeFactsEl.innerHTML = "";
      location.facts.forEach((fact) => {
        const li = document.createElement("li");
        li.textContent = fact;
        placeFactsEl.appendChild(li);
      });

      placeImageEl.src = location.image;
      placeImageEl.alt = location.name;
      placeImageEl.style.display = "block";
      if (mediaPlaceholderEl) {
        mediaPlaceholderEl.style.display = "none";
      }

      placeFlag(location.flagX || 50, location.flagY || 50);

      jumpHistory.unshift({ ip: location.ip, name: location.name });
      if (jumpHistory.length > 10) jumpHistory.pop();
      renderHistory();

      resultSectionEl.scrollIntoView({ behavior: "smooth", block: "center" });
    }

    generateBtn.addEventListener("click", () => {
      const loc = locations[Math.floor(Math.random() * locations.length)];
      applyLocation(loc);
    });

    renderHistory();
  </script>
</body>
</html>
